@charset 'utf-8';

@use 'sass:math';
@use '../../asset/scss/helper/function';
@use '../../asset/scss/helper/mixin';
@use '../../asset//scss/helper/const';
@use '../../asset/scss/helper/var';

/**
 * 랭킹
 * 랭킹
 */

/** 랭킹 */
.m_ranking#{function.escape('.T=rb')} {
	h2 {
		padding: 32px 0 31px;
		@include mixin.font(#222 700 '2.6rem' [var.$font_family_kb] center);
	}

	// 공통
	[class*='m_ranking-'] {
		// 랭킹 메인
		@include mixin.is('section', '&') {
			&:first-of-type {
				padding-top: 32px;
			}

			&:nth-of-type(n+2) {
				margin-top: 59px;
			}

			h3 {
				padding-bottom: 32px;
				@include mixin.font(#222 700 '2.6rem' [var.$font_family_kb] center);
			}

			.mm_foot {
				margin-top: 32px;

				.btn_more {
					.ico_link {
						margin: 9px 0 0 6px;

						&::before {
							width: 13px;
							height: 13px;
						}
					}
				}
			}
		}

		.text_rank {
			&::before {
				counter-increment: listIndex;
				content: counter(listIndex);
			}
		}

		// 랭킹 상품리스트 순위 노출
		.mm_product-list,
		&.mm_product-list {
			counter-reset: listIndex;

			.text_rank {
				position: absolute;
				z-index: 3; // text_adult 의 z-index보다 높이기 위해 3으로 설정
				text-align: center;
				pointer-events: none;

				> * {
					display: block;
				}
			}
		}
	}

	// 랭킹 gnb
	.m_ranking-gnb {
		height: 49px;

		&#{function.escape('.S=sticky')} {
			.m_ranking-gnb-inner {
				position: fixed;
				z-index: const.$z_index_floating - 1;
				top: 0;
				left: 0;
				width: 100%;
				transform: translateY(var(--header_height_base));
				transition: transform const.$time_fast;
			}
		}

		&-inner {
			background-color: #fff;
			transform: translateY(0);
		}

		ul {
			padding: 0 10px;

			li {
				margin: 0;
			}
		}
	}

	// 랭킹 카테고리
	.m_ranking-category {
		height: 52px;

		&#{function.escape('.S=sticky')} {
			.m_ranking-category-inner {
				position: fixed;
				z-index: const.$z_index_floating - 2;
				top: 0;
				left: 0;
				width: 100%;
				transform: translateY(calc(var(--header_height_base) + 49px));
				transition: transform const.$time_fast;
			}
		}

		&-inner {
			position: relative;
			background-color: #fff;

			&::after {
				position: absolute;
				top: 0;
				right: 0;
				bottom: 0;
				width: 36px;
				background: linear-gradient(270deg, #fff 15%, rgba(#fff, 0) 100%);
				content: '';
			}

			ul {
				display: inline-block;
				position: relative;
				padding: 8px 24px;
				min-width: 100%;
				@include mixin.font('0', nowrap);

				li {
					display: inline-block;

					&:nth-child(n+2) {
						margin-left: 8px;
					}

					button {
						position: relative;
						padding: 0 12px;
						min-width: 68px;

						&#{function.escape('.S=category-on')} {
							background-color: #3b4a65;
							@include mixin.font(#fff 600);

							&::after {
								border-color: #303d54;
							}
						}
					}
				}
			}
		}
	}

	.m_ranking-head {
		position: relative;
		padding: 28px 0 20px;
		@include mixin.clearfix;

		&-update {
			display: inline-block;
			font-size: 0;

			.text_update {
				display: inline-block;
				@include mixin.font(#444 '1.5rem/2.2rem');

				span {
					margin-right: 7px;
				}
			}

			.btn_help {
				position: relative;
				margin: 3px 0 0 5px;

				&::before {
					position: absolute;
					top: -8px;
					right: -8px;
					bottom: -8px;
					left: -8px;
					content: '';
				}
			}

			#{function.escape('.m...update-tooltip')} {
				display: none;
				position: absolute;
				z-index: 4; // 상품의 text_rank 보다 위에 띄우기 위해 z-index 값을 4로 합니다.
				right: 0;
				left: 0;
				margin-top: 4px;
				padding: 17px 48px 17px 20px;
				border-radius: 8px;
				background-color: rgba(#000, 0.8);
				@include mixin.font(#f8f8f8 '1.4rem/2rem');

				.btn_close {
					position: absolute;
					top: 0;
					right: 0;
					padding: 12px;
				}
			}

			&#{function.escape('.S=toggle-on')} {
				#{function.escape('.m...update-tooltip')} {
					display: block;
				}
			}
		}

		.mm_form-select {
			float: right;
			padding-right: 1px;
			width: auto;
			min-width: 120px;

			label {
				height: 22px;
				border: 0;
				border-radius: 0;

				.text_selected {
					padding-right: 20px;
					@include mixin.font(600 '1.4rem/2.2rem' right);
				}

				.ico_form-select {
					top: 3px;
					right: 0;
				}
			}
		}
	}

	// 랭킹 아이템, 랭킹 view 공통
	.m_ranking-item,
	.m_ranking-view {
		.mm_product-list {
			ol {
				li:first-child {
					.text_rank {
						padding-top: 7px;
						width: 50px;
						height: 50px;
						background-color: #eb5147;

						&::before {
							font-size: 1.8rem;
						}

						[class*='text_rank-'] {
							margin: 5px 0 0 -4px;
							font-size: 1.3rem;
						}

						.ico_rank-up,
						.ico_rank-down {
							margin: -2px 1px 0 0;

							&::before {
								width: 16px;
								height: 16px;
							}
						}

						.ico_rank-new {
							margin-top: 5px;

							&::before {
								font-size: 1.2rem;
							}
						}

						.ico_rank-unchanged {
							margin-top: 2px;
						}

						+ .mm_product-item {
							.text_tag {
								top: 50px;
							}
						}
					}
				}
			}

			.text_rank {
				padding-top: 5px;
				width: 40px;
				height: 40px;
				border-radius: 8px 0 4px;
				background-color: #444;
				color: #fff;

				&::before {
					font-size: 1.6rem;
				}

				[class*='text_rank-'] {
					font-size: 1.4rem;
				}

				.ico_rank-up,
				.ico_rank-down {
					margin-top: 3px;

					&::before {
						width: 12px;
						height: 12px;
						background-color: #fff;
					}
				}

				.ico_rank-new {
					margin-top: 2px;

					&::before {
						@include mixin.font(#fff 400);
					}
				}

				.ico_rank-unchanged::before {
					background-color: #fff;
				}

				+ .mm_product-item {
					.text_tag {
						top: 40px;
						border-radius: 0 4px 4px 0;
					}
				}
			}
		}
	}

	// 랭킹 아이템
	.m_ranking-item {
		.mm_product-list {
			@include mixin.context-before('.m_ranking-head +') {
				ol {
					grid-gap: 48px 12px;

					li:first-child {
						margin-bottom: -29px;
					}
				}
			}

			ol {
				li:first-child {
					grid-column: 1/3;
					margin-bottom: -12px;

					.mm_product-item {
						figcaption {
							.text_product {
								height: auto;
								max-height: 48px;
							}
						}
					}
				}
			}
		}
	}

	// 랭킹 브랜드
	.m_ranking-brand {
		&[class*='m_ranking-'] {
			> h3 {
				padding-bottom: 16px;
			}

			.mm_foot {
				margin-top: 16px;
			}
		}

		&-list {
			counter-reset: listIndex;

			.btn_brand {
				position: relative;
				width: 100%;

				.text_rank {
					[class*='text_rank-'] {
						@include mixin.font(#f46600 400 '1.3rem/1');

						> i {
							margin-top: -1px;

							&::before {
								width: 14px;
								height: 14px;
							}
						}
					}

					.text_rank-down {
						color: var(--color_sub);
					}

					.ico_rank-new::before {
						padding: 0 5px;
						height: 20px;
						border-radius: 5px;
						background-color: #ff0e56;
						@include mixin.font(#fff '1.2rem/2rem');
					}
				}
			}

			.mm_product-item {
				.mm_product-item-image {
					width: 100%;

					.image_product {
						position: relative;
						width: 100%;

						&::after {
							padding-top: var.$prod_height_base;
							content: '';
						}
					}
				}
			}

			// 랭킹 서브
			@include mixin.context-before('.m_ranking-head +') {
				.btn_brand {
					padding-right: 24px;
					height: 78px;
					@include mixin.font(#222 500 '1.8rem/8.4rem');

					.text_rank {
						margin-right: 18px;

						&::before {
							font-weight: 600;
						}

						[class*='text_rank-'] {
							display: inline-block;
							margin: 35px 0 0 9px;
						}

						.ico_rank-unchanged {
							margin: 33px 0 0 11px;
						}

						.ico_rank-new {
							margin: 31px 0 0 9px;
						}
					}

					.ico_link {
						position: absolute;
						top: 28px;
						right: 0;

						&::before {
							width: 24px;
							height: 24px;
							background-color: #888;
						}
					}
				}

				> ol {
					> li:nth-child(n+2) {
						margin-top: 15px;
					}
				}

				.mm_product-list {
					margin: 0 -24px;

					ol {
						display: inline-block;
						padding: 0 24px;
						@include mixin.font('0', nowrap);

						> li {
							display: inline-block;
							width: 132px;

							&:nth-child(n+2) {
								margin-left: 8px;
							}
						}
					}
				}

				.mm_product-item {
					figcaption {
						.text_price {
							margin-top: 9px;
							text-align: center;

							> strong {
								@include mixin.font('1.8rem/2.6rem');
							}
						}
					}
				}
			}
		}

		// 랭킹 메인
		@include mixin.is('section', '&') {
			.m_ranking-brand-list {
				.btn_brand {
					padding: 0 58px 0 52px;
					height: 58px;
					border-radius: 8px;
					background-color: #fff;
					@include mixin.font(#666 '1.6rem/6rem' left);

					.text_rank {
						position: absolute;
						right: 0;
						left: 0;

						&::before {
							position: absolute;
							top: 0;
							left: 2px;
							width: 52px;
							@include mixin.font(600 '1.8rem' center);
						}

						> * {
							position: absolute;
							top: 21px;
							right: 27px;
						}

						[class*='text_rank-'] {
							top: 23px;
						}

						.ico_rank-new {
							top: 19px;
							right: 20px;
						}
					}
				}

				> ol {
					> li {
						border-radius: 8px;
						background-color: #f8f8f8;

						&#{function.escape('.S=brand-on')} {
							.btn_brand {
								padding-left: 56px;
								height: 60px;
								@include mixin.font(#222 600 '1.8rem/6.2rem');

								&::before {
									display: none;
								}

								&::after {
									position: absolute;
									top: 0;
									right: 0;
									bottom: 0;
									left: 0;
									border: 2px solid var(--color_main);
									border-radius: 8px;
									content: '';
								}

								.text_rank {
									&::before {
										left: 6px;
										@include mixin.font(#222 '2rem');
									}

									[class*='text_rank-'] {
										top: 24px;
										right: 33px;
									}
								}
							}

							.mm_product-list {
								height: auto;
							}

							+ li {
								.btn_brand::before {
									display: none;
								}
							}
						}

						&:nth-child(n+2) {
							.btn_brand::before {
								position: absolute;
								top: -1px;
								right: 0;
								left: 0;
								border-top: 1px solid #eee;
								content: '';
							}
						}
					}
				}

				.mm_product-list {
					overflow: hidden;
					height: 0;

					ol {
						display: grid;
						grid-template-columns: repeat(3, 1fr);
						grid-column-gap: 8px;
						padding: 16px 14px 15px;

						li:nth-child(n+2) {
							margin: 0;
						}
					}
				}

				.mm_product-item {
					figcaption {
						position: relative;
						margin: 0;
						padding: 0;

						.text_price {
							margin-top: 5px;
							text-align: center;

							> strong {
								@include mixin.font('1.6rem/2.4rem');
							}
						}
					}
				}
			}
		}
	}

	// 랭킹 view
	.m_ranking-view {
		// 랭킹 메인
		@include mixin.is('section', '&') {
			.mm_product-list {
				ol {
					grid-gap: 8px;

					li:first-child,
					li:nth-child(4) {
						grid-column: 1/3;

						.mm_product-item {
							figcaption {
								right: 16px;
								bottom: 20px;
								left: 16px;

								.text_product {
									height: 26px;
									@include mixin.font('1.8rem/2.6rem');
								}
							}
						}
					}
				}
			}

			.mm_product-item {
				&-image {
					.image_product:not(.ico_none)::after {
						position: absolute;
						top: 0;
						right: 0;
						bottom: 0;
						left: 0;
						background-image: linear-gradient(180deg, rgba(#fff, 0) 68.5%, #000 124.92%);
						content: '';
					}
				}

				figcaption {
					position: absolute;
					right: 12px;
					bottom: 16px;
					left: 12px;
					margin: 0;
					padding: 0;

					.text_product {
						margin: 0;
						height: 24px;
						@include mixin.text-ellipsis(1);
						@include mixin.font(#fff 600 '1.6rem');
					}
				}
			}
		}

		// 랭킹 서브
		.m_ranking-head {
			+ .mm_product-list {
				ol {
					grid-gap: 32px 12px;

					li {
						&:nth-child(-n+3) {
							grid-column: 1/3;
							margin-bottom: -24px;

							.mm_product-item {
								figcaption {
									right: 16px;
									left: 16px;

									.text_product {
										height: 26px;
										@include mixin.font('1.8rem/2.6rem');
									}
								}
							}
						}

						&:nth-child(-n+7) {
							.mm_product-item {
								&-image {
									.image_product:not(.ico_none)::after {
										position: absolute;
										top: 0;
										right: 0;
										bottom: 0;
										left: 0;
										background-image: linear-gradient(180deg, rgba(#fff, 0) 68.5%, #000 124.92%);
										content: '';
									}
								}

								figcaption {
									position: absolute;
									right: 14px;
									bottom: 20px;
									left: 14px;
									margin: 0;
									padding: 0;

									.text_product {
										margin: 0;
										height: 24px;
										@include mixin.text-ellipsis(1);
										@include mixin.font(#fff 600 '1.6rem');
									}
								}
							}
						}

						&:nth-child(4) {
							margin: 0 -2px -24px 0;
						}

						&:nth-child(5) {
							margin: 0 0 -24px -2px;
						}

						&:nth-child(6) {
							margin: 0 -2px 16px 0;
						}

						&:nth-child(7) {
							margin: 0 0 16px -2px;
						}
					}
				}
			}
		}
	}

	// 랭킹 찜
	.m_ranking-like {
		&[class*='m_ranking-'] {
			.mm_foot {
				margin-top: 40px;
			}
		}

		.text_rank {
			padding-top: 4px;
			width: 36px;
			color: #222;

			&::before {
				@include mixin.font(600 '2rem');
			}

			[class*='text_rank-'] {
				margin: 8px 0 0 -5px;
				@include mixin.font(#f46600 400 '1.3rem/1');

				> i {
					margin: -2px 1px 0 0;

					&::before {
						width: 16px;
						height: 16px;
					}
				}
			}

			.text_rank-down {
				color: var(--color_sub);
			}

			.ico_rank-new {
				margin-top: 9px;

				&::before {
					@include mixin.font(#222 400);
				}
			}

			.ico_rank-unchanged {
				margin-top: 4px;
			}
		}

		.mm_product-list {
			> ol {
				> li {
					position: relative;

					&:nth-child(n+2) {
						margin-top: 32px;
					}

					&:nth-child(-n+3) {
						&:not(:first-child) {
							margin-top: 28px;
						}

						.mm_product-item {
							> a {
								min-height: 140px;
							}

							.mm_product-item-image {
								width: 37.33333vw;
							}

							figcaption {
								margin-left: 37.33333vw;
								padding-top: 1px;

								.text_brand {
									color: #666;
								}

								.text_product {
									color: var(--color_text_base);
								}

								.text_sale {
									right: 5px;
									margin-top: 7px;
								}

								.text_price {
									margin-top: 6px;
								}
							}
						}

						.text_like {
							bottom: -1px;
							left: calc(48px + 37.33333vw + 10px);
							padding: 0 6px;
							height: 24px;
							border-radius: 4px;
							background-color: #f8f8f8;
							@include mixin.font(#666 '1.3rem/2.6rem');

							.ico_like-fill {
								margin: 5px 4px 0 0;

								&::before {
									width: 14px;
									height: 14px;
								}
							}
						}
					}

					&:nth-child(4) {
						margin-top: 40px;
					}
				}
			}
		}

		.mm_product-item {
			> a {
				padding-left: 48px;
				min-height: 137px;
			}

			figure {
				position: relative;
			}

			.mm_product-item-image {
				width: 20vw;
			}

			figcaption {
				margin-left: 20vw;
				padding-top: 2px;

				.text_brand {
					color: #888;
				}

				.text_product {
					color: #444;
				}

				.text_sale {
					right: 2px;
				}
			}
		}

		.text_like {
			position: absolute;
			bottom: 0;
			left: calc(48px + 20vw + 12px);
			@include mixin.font(#444 '1.3rem');
			pointer-events: none;

			.ico_like {
				margin: -2px 4px 2px 0;

				&::before {
					width: 16px;
					height: 16px;
					background-color: #444;
				}
			}
		}
	}
}