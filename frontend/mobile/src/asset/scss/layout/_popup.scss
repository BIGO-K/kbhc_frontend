@charset 'utf-8';

@use 'sass:math';
@use '../helper/function';
@use '../helper/mixin';
@use '../helper/const';
@use '../helper/var';
@use '../helper/extend';

/**
 * 레이아웃
 * 팝업
 */

/** 팝업 페이지 */
// 기본
#{function.escape('.L=popup')} {
	.mm_header {
		h1 {
			b:not(.mm_ir-blind) {
				padding: 0 48px;
			}
		}

		.mm_rside {
			padding-right: 19px;
		}

		// 이전으로
		.btn_back {
			display: none;

			&#{function.escape('.S=back-on')} {
				display: block;
			}
		}
	}

	.mm_page {
		> .mm_scroller {
			background-color: #fff;
		}
	}

	// 인쇄시 (영수증)
	// @media print {
	// 	body,
	// 	.mm_scroller {
	// 		overflow: visible;
	// 	}

	// 	.m_receipt-head,
	// 	.mm_foot {
	// 		display: none;
	// 	}
	// }

	// 검색
	&#{function.escape('.L=search')} {
		.mm_header {
			border-bottom: 1px solid #eee;

			.mm_form-text {
				position: absolute;
				top: 0;
				right: 45px;
				left: 44px;

				label {
					height: calc(var(--header_height_base) - 1px);
					font-size: 1.6rem;

					.textfield {
						padding-left: 8px;
					}

					.bg_text {
						border: 0;
					}

					.text_placeholder {
						padding-left: 8px;
						line-height: var(--header_height_base);// math.div(var(--header_height_base), const.$font_size_base) * 1rem;
					}
				}
			}
		}
	}
}

/** 팝업 영역 */
.mm_popup {
	overflow: hidden;
	position: fixed;
	z-index: const.$z_index_popup;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;

	&-dim {
		width: 100%;
		height: 100%;
		background-color: rgba(#000, 0.4);
		opacity: 0;
		transition: opacity const.$time_fast;
	}

	&-items {
		position: absolute;
		top: 0;
		right: 0;
		bottom: 0;
		left: 0;
	}

	// 팝업 열림
	#{function.escape('.L=popup')} & {
		.mm_popup-dim {
			opacity: 1;
		}
	}
}

/** 팝업 요소 */
.mm_popup-item {
	position: absolute;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;
	background-color: #fff;
	opacity: 0;
	transition: opacity 0s const.$time_fast, transform const.$time_fast;
	pointer-events: none;// top: var(--header_height_base);

	// 노출모션
	&#{function.escape('.S=motion-up')} {
		transform: translate(0, 100%);
	}
	&#{function.escape('.S=motion-down')} {
		transform: translate(0, -100%);
	}
	&#{function.escape('.S=motion-left')} {
		transform: translate(100%, 0);
	}
	&#{function.escape('.S=motion-right')} {
		transform: translate(-100%, 0);
	}

	&#{function.escape('.S=old')},
	&#{function.escape('.S=on')} {// 현재창
		opacity: 1;
		transform: translate(0, 0);
		transition: opacity const.$time_fast, transform const.$time_base;
		pointer-events: auto;

		// 모션없음
		&#{function.escape('.S=nomotion')} {
			transition: none;
		}
	}

	iframe {
		// flex: 1;
		position: relative;
		min-width: 100%;
	}

	> .mm_loading {
		z-index: 1;
	}
}

/** 팝업 닫기 */
.btn_popup-close {
	width: 36px;

	.ico_popup-close {
		margin-top: -3px;
	}

	.mm_popup & {
		position: absolute;
		z-index: 1;
		right: 10px;
		padding: 14px 0;
	}

	// 바코드 팝업 닫기
	#{function.escape('.S=barcode')} & {
		top: auto;
		bottom: 0;
		width: 72px;
		height: 72px;
		@include mixin.font('2.2rem/7.2rem');

		@include mixin.context-first('#{function.escape('.S=landscape')}') {
			top: 0;
			bottom: auto;
		}
	}
}

/** 최근 본 상품 */
.m_recent {
	padding: 0 24px;

	#{function.escape('.mm_product-list.T=sm')} {
		margin-top: -20px;

		ul {
			border-top: 0;

			li {
				padding: 20px 0 19px;
			}
		}
	}
}

/** 검색 */
.m_search {
	padding-top: 38px;
	height: 100%;

	.mm_carousel {
		&-inner {
			padding: 0 38px;
			height: 100%;
		}

		&-list {
			height: 100%;
		}

		&-item {
			padding: 0 4px;
			height: 100%;
		}

		&-pagination {
			top: 16px;
			bottom: auto;

			li:nth-child(n+2) {
				margin-left: 6px;
			}

			.btn_carousel-page {
				width: 6px;
				height: 6px;
				background-color: #ccc;
				opacity: 1;
				pointer-events: none;

				&#{function.escape('.S=on')} {
					width: 20px;
					background-color: #444;
				}
			}
		}
	}

	// 검색어 자동완성
	&-auto {
		display: none;
		background-color: #fff;
		@include mixin.font(#222 '1.6rem/4rem');

		&#{function.escape('.S=auto-on')} {
			display: block;
			z-index: 3;
		}

		li {
			a {
				display: block;
				position: relative;
				padding: 0 50px 0 28px;

				> b {
					@include mixin.text-ellipsis(1, inline);
				}

				.ico_depth {
					margin: 11px 8px 0;
				}
			}

			.ico_link-arrow {
				position: absolute;
				top: 15px;
				right: 28px;
			}
		}

		// 브랜드
		#{function.escape('.m...auto-brand')} {
			ul {
				padding: 6px 0;
			}

			li {
				a {
					position: relative;
					padding: 6px 18px;
					line-height: 4.6rem;

					> span {
						position: absolute;
						top: 6px;
						right: 3px;
						@include mixin.font(#888 '1.4rem');

						.ico_link {
							margin: 15px 15px 0 4px;

							&::before {
								background-color: #888;
							}
						}
					}
				}
			}

			figure {
				position: relative;
				font-size: 1.6rem;
				@include mixin.clearfix;

				> i {
					overflow: hidden;
					float: left;
					position: relative;
					padding: 0 5px;
					width: 46px;
					height: 46px;
					border: 1px solid #ccc;
					border-radius: 100%;
					background-origin: content-box;

					&.ico_none {
						&::before {
							width: 100%;
							@include mixin.svg(none);
							@include mixin.background(transparent url('/image/common/logo_kbhc.svg') '50% 50%/80% 80%' no-repeat);
							mix-blend-mode: luminosity;
						}
					}
				}
			}

			figcaption {
				float: left;
				margin-left: 12px;
			}

			+ ul:last-of-type {
				border-top: 1px solid #eee;
			}
		}

		// 카테고리 이동
		#{function.escape('.m...auto-category')} {
			ul {
				padding: 12px 0 4px;
				background-color: #f8f8f8;

				a {
					b {
						line-height: 3.4rem;
					}
				}
			}
		}

		#{function.escape('.m...auto-keyword')} {
			li {
				&:nth-child(n+2) {
					border-top: 1px solid #eee;
				}

				&:last-child {
					border-bottom: 1px solid #eee;
				}

				a {
					padding-top: 1px;

					b {
						line-height: 4.5rem;
					}
				}
			}
		}

		#{function.escape('.m...auto-none')} {
			padding: 5px 28px 2px;
			border-bottom: 1px solid #eee;

			.ico_link-arrow {
				position: absolute;
				top: 15px;
				right: 28px;
			}
		}
	}

	// 최근 검색어, 최근 본 상품, 인기검색어
	&-list {
		display: flex;
		overflow: hidden;
		flex-direction: column;
		position: relative;
		height: 100%;
		border: 1px solid #eee;
		border-radius: 8px;

		h3 {
			padding: 2px 23px 0;
			height: 47px;
			border-bottom: 1px solid #eee;
			background-color: #f8f8f8;
			@include mixin.font(#222 '1.4rem/4.7rem');
		}

		.mm_scroller {
			flex: 1;
			padding: 0 23px 0 21px;

			// 최근 검색어, 인기 검색어
			> ol,
			> ul {
				li {
					display: flex;
					position: relative;

					&:nth-child(n+2) {
						border-top: 1px solid #eee;
					}

					> a {
						flex: 1;
						padding-top: 2px;
						@include mixin.font(#222 '1.6rem');

						> b {
							@include mixin.text-ellipsis(1);
							line-height: 4.5rem;
						}
					}

					.btn_remove {
						width: 43px;

						.ico_remove::before {
							margin: 1px -6px 0 16px;
							width: 20px;
							height: 20px;
						}
					}
				}
			}

			// 최근 검색어
			> ul {
				padding-left: 6px;
			}

			// 인기 검색어
			> ol {
				counter-reset: listIndex;

				li {
					&:nth-child(-n+3) {
						a {
							color: var(--color_text_base);

							&::before {
								color: var(--color_sub);
							}
						}
					}

					> a {
						padding: 2px 40px 0 32px;

						&::before {
							position: absolute;
							top: 17px;
							bottom: 0;
							left: 1px;
							width: 17px;
							@include mixin.font(var(--color_text_base) '1.6rem' center);
							counter-increment: listIndex;
							content: counter(listIndex);
						}
					}
				}

				[class*='ico_rank'] {
					position: absolute;
					top: 50%;
					right: 0;
					transform: translateY(-50%);
				}

				$ranks: (up, #f46600), (down, var(--color_sub)), (new, #ed356c) , (unchanged, #888);
				@each $rank, $color in $ranks {
					.ico_rank-#{$rank} {
						color: $color;

						@if $rank == new {
							right: 0;

							&::before {
								width: 38px;
								height: 20px;
								border-radius: 5px;
								background-color: $color;
								content: 'NEW';
								@include mixin.font(#fff 700 '1.2rem/2rem' center);
							}
						}

						+ .text_rank {
							position: absolute;
							top: 2px;
							right: 18px;
							@include mixin.font($color '1.3rem');
						}
					}
				}
			}

			// 최근본상품
			.mm_product-list#{function.escape('.T=sm')} {
				ul {
					padding-left: 2px;
					border: 0;

					li {
						padding: 0;
					}
				}

				figure {
					grid-template-columns: 60px auto;
				}

				.mm_product-item {
					&-image {
						padding-top: calc(60px * var(--prod_ratio_base));
					}

					a {
						padding: 12px 0 10px;
					}

					.text_soldout {
						width: 60px;
						height: calc(60px * var(--prod_ratio_base));
					}

					figcaption {
						padding-right: 0;
						min-height: calc(60px * var(--prod_ratio_base));
					}

					.text_price {
						margin-top: 7px;
					}
				}
			}
		}

		#{function.escape('.m...list-foot')} {
			height: 47px;
			border-top: 1px solid #eee;
			background-color: #fff;
			@include mixin.font(#444 '1.4rem/4.6rem' right);

			> * {
				padding: 0 23px;
			}

			[class*='btn_'] {
				height: 100%;
				color: #6a6a6a;

				.ico_link {
					margin: 18px 0 0 9px;
				}

				.ico_remove-trash {
					margin: 15px 0 0 9px;

					&::before {
						width: 16px;
						height: 16px;
					}
				}
			}
		}
	}

	// 검색결과
	&-result {
		.btn_more {
			.ico_more {
				margin: 13px 0 0 10px;
			}
		}

		// 검색어 변환
		#{function.escape('.m...result-offer')} {
			text-align: center;

			p {
				padding: 29px 0 14px;
				@include mixin.font('1.6rem/2.4rem');

				strong {
					color: var(--color_sub);
				}
			}

			> a {
				padding: 7px 10px;
				@include mixin.font('1.4rem/2rem');

				strong {
					margin-right: 4px;
				}

				.ico_link {
					margin: 2px 0 0 5px;

					&::before {
						background-color: #222;
					}
				}
			}

			+ #{function.escape('.m...result-keyword')} {
				margin-top: 10px;
			}
		}

		// 연관검색어
		#{function.escape('.m...result-keyword')} {
			border-bottom: 1px solid #eee;

			ul {
				display: inline-block;
				padding: 15px 24px;
				@include mixin.font('0', nowrap);

				li {
					display: inline-block;

					&:nth-child(n+2) {
						margin-left: 8px;
					}
				}
			}
		}

		// 브랜드샵
		.btn_brandshop {
			display: block;
			position: relative;
			padding: 17px 125px 14px 24px;
			border-bottom: 1px solid #eee;
			background-color: #f8f8f8;
			@include mixin.font(#222 '1.6rem/2.4rem');

			b {
				position: absolute;
				top: 50%;
				right: 24px;
				font-size: 1.4rem;
				transform: translateY(-50%);

				.ico_link {
					margin: 4px 0 0 4px;

					&::before {
						background-color: #222;
					}
				}
			}
		}

		.mm_product-list {
			.mm_text-none {
				padding-top: 36px;
			}
		}

		// 결과없음
		> .mm_text-none {
			padding-bottom: 15px;

			+ .mm_note {
				margin: 0 24px;
				padding: 16px 23px;

				li {
					padding-left: 15px;

					&:nth-child(n+2) {
						margin-top: 8px;
					}
				}
			}
		}

		// 검색 결과 없음 페이지(인기 검색어)
		.m_search-list {
			margin-top: 40px;
		}

		// 베스트 아이템
		#{function.escape('.m...result-best')} {
			margin-top: 40px;

			h3 {
				padding: 0 0 16px 24px;
				@include mixin.font(#222 600 '2rem/2.8rem');
			}
		}
	}
}